  <div class="pattern-center-blank"></div>
  <% if (post.photos && post.photos.length){ %>
    <div class="pattern-center-sakura">
      <div class="pattern-attachment-img">
        <img src="<%- theme.lazyloadImg%>" data-src="<%= post.photos %>" class="lazyload" onerror="imgError(this,3)" style="width: 100%; height: 100%; object-fit: cover; pointer-events: none;">
      </div>
      <header class="pattern-header ">
        <h1 class="entry-title">
        <%= post.keywords %></h1>
      </header>
    </div>
  <% } %>

  <!--标签统计-->
  <%
  var colorArr = ['#F9EBEA', '#F5EEF8', '#D5F5E3', '#E8F8F5', '#FEF9E7',
      '#F8F9F9', '#82E0AA', '#D7BDE2', '#A3E4D7', '#85C1E9', '#F8C471', '#F9E79F', '#FFF'];
  var colorCount = colorArr.length;
  var hashCode = function (str) {
      if (!str && str.length === 0) {
          return 0;
      }
  
      var hash = 0;
      for (var i = 0, len = str.length; i < len; i++) {
          hash = ((hash << 5) - hash) + str.charCodeAt(i);
          hash |= 0;
      }
      return hash;
  };
  var i = 0;
  var isTag = is_tag();
  %>
  
  <% if (page.path === "tags/index.html"){ %>
  <div id="tags" class="container chip-container">
      <div class="card">
          <div class="card-content">
              <div class="tag-title center-align">
                  目前共计 <%=site.tags.length%> 个标签
              </div>
              <div class="tag-chips">
                  <% site.tags.map(function(tag) { %>
                  <%
                      i++;
                      var color = i >= colorCount ? colorArr[Math.abs(hashCode(tag.name) % colorCount)]
                              : colorArr[i - 1];
                  %>
                  <a href="<%- url_for(tag.path) %>" title="<%- tag.name %>: <%- tag.length %>">
                      <span class="chip center-align waves-effect waves-light
                              <% if (isTag && tag.name == page.tag) { %> chip-active <% } else { %> chip-default <% } %>"
                              data-tagname="<%- tag.name %>" style="background-color: <%- color %>;"><%- tag.name %>
                          <span class="tag-length"><%- tag.length %></span>
                      </span>
                  </a>
                  <% }); %>
              </div>
          </div>
      </div>
  </div>
  <% } %>

<!--分类统计-->
<%
var colorArr = ['#F9EBEA', '#F5EEF8', '#D5F5E3', '#E8F8F5', '#FEF9E7',
    '#F8F9F9', '#82E0AA', '#D7BDE2', '#A3E4D7', '#85C1E9', '#F8C471', '#F9E79F', '#FFF'];
var colorCount = colorArr.length;
var hashCode = function (str) {
    if (!str && str.length === 0) {
        return 0;
    }

    var hash = 0;
    for (var i = 0, len = str.length; i < len; i++) {
        hash = ((hash << 5) - hash) + str.charCodeAt(i);
        hash |= 0;
    }
    return hash;
};
var i = 0;
var isCategory = is_category();
%>

<% if (page.path === "tags/index.html"){ %>
<div id="category-cloud" class="container chip-container">
    <div class="card">
        <div class="card-content">
            <div class="tag-title center-align">
                目前共计 <%=site.categories.length%> 个分类
            </div>
            <div class="tag-chips">
                <% if (site.categories && site.categories.length > 0) { %>
                <% site.categories.map(function(category) { %>
                <%
                    i++;
                    var color = i >= colorCount ? colorArr[Math.abs(hashCode(category.name) % colorCount)]
                            : colorArr[i - 1];
                %>
                <a href="<%- url_for(category.path) %>" title="<%- category.name %>: <%- category.length %>">
                    <span class="chip center-align waves-effect waves-light
                            <% if (isCategory && category.name == page.category) { %> chip-active <% } else { %> chip-default <% } %>"
                            style="background-color: <%- color %>;"><%- category.name %>
                        <span class="tag-length"><%- category.length %></span>
                    </span>
                </a>
                <% }); %>
                <% } else { %>
                <%= __('categoryEmptyTip') %>
                <% } %>
            </div>
        </div>
    </div>
</div>
<% } %>

<% if (page.path === "tags/index.html"){ %>
    <style type="text/css">
        #category-radar {
            margin-top: 50px;
            width: 100%;
            height: 360px;
        }
    </style>

    <div class="container" data-aos="fade-up">
        <div class="card">
            <div id="category-radar" class="card-content"></div>
        </div>
    </div>

    <script type="text/javascript" src="https://cdn.jsdelivr.net/gh/wallleap/cdn/js/echarts.min.js"></script>
    <script type="text/javascript">
        let radarChart = echarts.init(document.getElementById('category-radar'));

        <%
            var categories = site.categories;

            // Find the maximum and average values of the post categories.
            var radarValueArr = [];
            categories.some(function(category) {
                radarValueArr.push(category.length);
            });

            var max = Math.max.apply(null, radarValueArr) + Math.min.apply(null, radarValueArr);

            // Calculate the data needed for the radar chart.
            var indicatorArr = [];
            categories.map(function(category) {
                indicatorArr.push({'name': category.name, 'max': max});
            });

            var indicatorData = JSON.stringify(indicatorArr);
            var radarValueData = JSON.stringify(radarValueArr);
        %>

        let option = {
            title: {
                left: 'center',
                text: '文章分类雷达图',
                textStyle: {
                    fontWeight: 500,
                    fontSize: 22
                }
            },
            tooltip: {},
            radar: {
                name: {
                    textStyle: {
                        color: '#3C4858'
                    }
                },
                indicator: <%- indicatorData %>,
                nameGap: 5,
                center: ['50%','55%'],
                radius: '66%'
            },
            series: [{
                type: 'radar',
                color: ['#3ecf8e'],
                itemStyle: {normal: {areaStyle: {type: 'default'}}},
                data : [
                    {
                        value : <%- radarValueData %>,
                        name : '文章分类数量'
                    }
                ]
            }]
        };

        radarChart.setOption(option);
    </script>
<% } %>

<div id="content" class="site-content">
  <article class="post-item post-301 page type-page status-publish has-post-thumbnail hentry">
      <%- post.content %>
      <%- partial('_partial/comment') %>
  </article>
</div>